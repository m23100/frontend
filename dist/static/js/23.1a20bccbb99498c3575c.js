webpackJsonp([23],{CvU3:function(e,r,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.Firefrom .centent[data-v-124e3c72] {\n  background-color: #fff;\n  padding: 20px;\n}\n.Firefrom .medium[data-v-124e3c72] {\n  margin-right: 5px;\n  width: 100px;\n}\n.Firefrom .datetime[data-v-124e3c72] {\n  width: 220px;\n}\n.Firefrom .avatar-uploader .el-upload[data-v-124e3c72] {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.Firefrom .avatar-uploader .el-upload[data-v-124e3c72]:hover {\n  border-color: #409EFF;\n}\n.Firefrom .avatar-uploader-icon[data-v-124e3c72] {\n  font-size: 28px;\n  color: #8c939d;\n  width: 115px;\n  height: 115px;\n  line-height: 115px;\n  text-align: center;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  margin-right: 15px;\n}\n.Firefrom .avatar-uploader-icon[data-v-124e3c72]:hover {\n  border-color: #409EFF;\n}\n.Firefrom .avatar[data-v-124e3c72] {\n  width: 115px;\n  height: 115px;\n  display: block;\n}\n.Firefrom .mini-date[data-v-124e3c72] {\n  width: 110px;\n}\n",""])},u55G:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("Dd8w"),i=t.n(o),a=t("NYxO"),l=t("m4jk"),s=t("vPHJ"),n=t("wEYB"),m={data:function(){return{ruleForm:{goodslink:"",goodstitle:"",coverimage:"",commissiontype:"",commissionrate:"",copywriting:"",copywritingimage:"",copywriting2:"",copywritingimage2:"",voucherprice:"",couponlink:"",coupontotal:"",begintime:"",begintimetype:"",coupontype:"",activitytype:"",startsales:"",begindate:"",copywritingimage_second:"",couponmoney:"",imageUrl:""},rules:{goodslink:[{required:!0,message:"请输入商品链接",trigger:"blur"}],begintimetype:[{required:!0,message:"请选择开始时间",trigger:"change"}],coupontype:[{required:!0,message:"请选择优惠券类型",trigger:"change"}],activitytype:[{required:!0,message:"请选择活动类型",trigger:"change"}],coverimage:[{required:!0,message:"请上传封面图",trigger:"change"}],copywritingimage:[{required:!0,message:"请上传文案主图",trigger:"change"}],goodstitle:[{required:!0,message:"请输入短标题",trigger:"blur"},{min:3,max:20,message:"短标题3到20个字符",trigger:"blur"}],voucherprice:[{required:!0,message:"请输入券后价",trigger:"blur"}],couponlink:[{required:!0,message:"请输入优惠券链接",trigger:"blur"}],coupontotal:[{required:!0,message:"请输入优惠券总量",trigger:"blur"}],commissionrate:[{required:!0,message:"请输入佣金比例",trigger:"blur"}],commissiontype:[{required:!0,message:"请输入佣金类型",trigger:"blur"}],copywriting:[{required:!0,message:"请输入导购文案",trigger:"blur"}],startsales:[{required:!0,message:"请输入入库初始销量",trigger:"change"}],copywritingimage2:[],copywriting2:[{required:!0,message:"请输入二段导购文案",trigger:"blur"}],couponmoney:[{required:!0,message:"请输入券面额",trigger:"change"}],begintime:[{required:!0,message:"请选择预约开始时间",trigger:"change"}],begindate:[{required:!0,message:"请选择预约开始时间",trigger:"change"}]},uploadUrl:n.a+"/api/image/imageUpload?type=goods",dialogImageUrl:"",dialogVisible:!1,filelist:[],uploadHeaders:{Authorization:"Bearer "+localStorage.getItem("token")},pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()||e.getTime()>Date.now()+2592e5},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"明天",onClick:function(e){var r=new Date;r.setTime(r.getTime()+864e5),e.$emit("pick",r)}},{text:"后天",onClick:function(e){var r=new Date;r.setTime(r.getTime()+1728e5),e.$emit("pick",r)}}]},imageUrl:""}},methods:i()({},Object(a.b)({setUserBalane:"setUserBalane"}),{handleExceed:function(e){this.$message.warning("只能上传1个文件")},beforeAvatarUpload:function(e){var r="image/jpeg"===e.type||"image/png"===e.type,t=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&t},coverImage:function(e,r){this.ruleForm.coverimage=n.b+e.data.url},copyImage:function(e,r){this.ruleForm.copywritingimage=n.b+e.data.url},WritingImage:function(e,r){this.ruleForm.copywritingimage_second=n.b+e.data.url},handleAvatarSuccess:function(e,r){this.imageUrl=n.b+e.data.url,this.ruleForm.imageUrl=n.b+e.data.url},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;var t=r.ruleForm;if(1==t.begintimetype)t.begintime=Object(s.a)(new Date,"yyyy-MM-dd hh:mm:ss");else{var o=Object(s.a)(new Date(t.begindate),"yyyy-MM-dd")+" "+t.begintime+":00";t.begintime=o}t.copywritingimage2=r.imageUrl,l.a.saveFire(t).then(function(e){0==e.code?(r.$message.success("提交成功!"),r.setUserBalane({voucherNumber:e.data.voucher_number,integralNumber:e.data.integral}),r.$router.replace("/Sviptesting")):r.$message.error("提交失败"+e.msg)})})},resetForm:function(e){this.$refs[e].resetFields()}}),created:function(){var e=this;this.ruleForm.goodsid=this.getGoodsId,this.ruleForm.goodslink=this.getGoodsLink,this.getEditId>0?l.a.editView({id:this.getEditId}).then(function(r){if(0==r.code){r.data.coverimage=JSON.parse(r.data.coverimage);var t=JSON.parse(r.data.copywritingimage),o=JSON.parse(r.data.copywriting);if(e.ruleForm=r.data,e.ruleForm.copywritingimage_second="",e.ruleForm.id=e.getEditId,2==e.ruleForm.begintimetype){var i=e.ruleForm.begintime;e.ruleForm.begindate=Object(s.a)(new Date(i),"yyyy-MM-dd"),e.ruleForm.begintime=Object(s.a)(new Date(i),"hh:mm")}else e.ruleForm.begintime="";e.ruleForm.coverimage=e.ruleForm.coverimage.main,e.ruleForm.copywritingimage=t.first,e.ruleForm.copywriting=o.first,e.ruleForm.copywriting2=o.second,e.ruleForm.copywritingimage2=t.second,e.imageUrl=t.second}else e.$router.push({path:"/Submission"})}):(this.ruleForm.coverimage=this.getGoodsCoverimg,this.ruleForm.startsales=this.getGoodsSalecount,this.ruleForm.goodsid=this.getGoodsId,this.ruleForm.goodslink=this.getGoodsLink,(this.ruleForm.goodsid<1||""==this.ruleForm.goodslink)&&this.$router.push({path:"/Submission"}))},computed:i()({},Object(a.c)(["getGoodsLink","getGoodsId","getEditId","getGoodsSalecount","getGoodsCoverimg"]))},c=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"Firefrom right-content"},[t("h2",{staticClass:"Title"},[e._v("填写商品信息")]),e._v(" "),t("div",{staticClass:"centent"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"商品链接",prop:"goodslink"}},[t("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.ruleForm.goodslink,callback:function(r){e.$set(e.ruleForm,"goodslink",r)},expression:"ruleForm.goodslink"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"短标题",prop:"goodstitle"}},[t("el-input",{attrs:{placeholder:"将商品短标题输入于此"},model:{value:e.ruleForm.goodstitle,callback:function(r){e.$set(e.ruleForm,"goodstitle",r)},expression:"ruleForm.goodstitle"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"初始销量",prop:"startsales"}},[t("el-input",{staticClass:"medium",attrs:{placeholder:"0",readonly:""},model:{value:e.ruleForm.startsales,callback:function(r){e.$set(e.ruleForm,"startsales",r)},expression:"ruleForm.startsales"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间",prop:"begintimetype"}},[t("el-radio-group",{model:{value:e.ruleForm.begintimetype,callback:function(r){e.$set(e.ruleForm,"begintimetype",r)},expression:"ruleForm.begintimetype"}},[t("el-radio",{attrs:{label:1}},[e._v("立即开始")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("预约开始")])],1)],1),e._v(" "),2==e.ruleForm.begintimetype?t("el-form-item",{attrs:{label:"时间",prop:"begindate"}},[t("el-date-picker",{attrs:{align:"right",type:"date",clearable:!1,placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions1},model:{value:e.ruleForm.begindate,callback:function(r){e.$set(e.ruleForm,"begindate",r)},expression:"ruleForm.begindate"}}),e._v(" "),e.ruleForm.begindate?t("el-time-select",{staticClass:"mini-date",attrs:{clearable:!1,"picker-options":{start:"00:00",step:"1:00",end:"23:00"},placeholder:"时间"},model:{value:e.ruleForm.begintime,callback:function(r){e.$set(e.ruleForm,"begintime",r)},expression:"ruleForm.begintime"}}):e._e()],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"活动类型",prop:"activitytype"}},[t("el-radio-group",{model:{value:e.ruleForm.activitytype,callback:function(r){e.$set(e.ruleForm,"activitytype",r)},expression:"ruleForm.activitytype"}},[t("el-radio",{attrs:{label:0}},[e._v("无活动")]),e._v(" "),t("el-radio",{attrs:{label:1}},[e._v("淘抢购")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("聚划算")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"封面图",prop:"coverimage"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.uploadHeaders,action:e.uploadUrl,"show-file-list":!1,limit:1,"before-upload":e.beforeAvatarUpload,"on-exceed":e.handleExceed,"on-success":e.coverImage}},[e.ruleForm.coverimage?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.coverimage}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("要求：图片大小400*400px，干净清晰，突显产品,不能出现牛皮癣、大量文字")])])],1),e._v(" "),t("el-form-item",{attrs:{label:"优惠券类型",prop:"coupontype"}},[t("el-radio-group",{model:{value:e.ruleForm.coupontype,callback:function(r){e.$set(e.ruleForm,"coupontype",r)},expression:"ruleForm.coupontype"}},[t("el-radio",{attrs:{label:2}},[e._v("阿里妈妈优惠券")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"券后价",prop:"voucherprice"}},[t("el-input",{staticClass:"medium",attrs:{placeholder:"0"},model:{value:e.ruleForm.voucherprice,callback:function(r){e.$set(e.ruleForm,"voucherprice",r)},expression:"ruleForm.voucherprice"}}),e._v("元\n      ")],1),e._v(" "),t("el-form-item",{attrs:{label:"券面额",prop:"couponmoney"}},[t("el-input",{staticClass:"medium",attrs:{placeholder:"0"},model:{value:e.ruleForm.couponmoney,callback:function(r){e.$set(e.ruleForm,"couponmoney",r)},expression:"ruleForm.couponmoney"}}),e._v("元\n      ")],1),e._v(" "),t("el-form-item",{attrs:{label:"优惠券总量",prop:"coupontotal"}},[t("el-input",{staticClass:"medium",attrs:{placeholder:"0"},model:{value:e.ruleForm.coupontotal,callback:function(r){e.$set(e.ruleForm,"coupontotal",r)},expression:"ruleForm.coupontotal"}}),e._v("张\n      ")],1),e._v(" "),t("el-form-item",{attrs:{label:"优惠券链接",prop:"couponlink"}},[t("el-input",{attrs:{placeholder:"将优惠券链接输入于此"},model:{value:e.ruleForm.couponlink,callback:function(r){e.$set(e.ruleForm,"couponlink",r)},expression:"ruleForm.couponlink"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"佣金类型",prop:"commissiontype"}},[t("el-radio-group",{model:{value:e.ruleForm.commissiontype,callback:function(r){e.$set(e.ruleForm,"commissiontype",r)},expression:"ruleForm.commissiontype"}},[t("el-radio",{attrs:{label:1}},[e._v("通用")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("定向")]),e._v(" "),t("el-radio",{attrs:{label:3}},[e._v("鹊桥")]),e._v(" "),t("el-radio",{attrs:{label:4}},[e._v("营销")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"佣金比率",prop:"commissionrate"}},[t("el-input",{staticClass:"medium",attrs:{placeholder:"0"},model:{value:e.ruleForm.commissionrate,callback:function(r){e.$set(e.ruleForm,"commissionrate",r)},expression:"ruleForm.commissionrate"}}),e._v("%\n      ")],1),e._v(" "),t("el-form-item",{attrs:{label:"文案主图",prop:"copywritingimage"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.uploadHeaders,action:e.uploadUrl,"show-file-list":!1,limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,"on-success":e.copyImage}},[e.ruleForm.copywritingimage?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.copywritingimage}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("要求：图片大小800*1200px，干净清晰，结构美观，突出产品卖点")])])],1),e._v(" "),t("el-form-item",{attrs:{label:"导购文案",prop:"copywriting"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.copywriting,callback:function(r){e.$set(e.ruleForm,"copywriting",r)},expression:"ruleForm.copywriting"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"二段文案图片",prop:"imageUrl"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.uploadHeaders,"show-file-list":!1,limit:1,"on-exceed":e.handleExceed,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"二段导购文案",prop:"copywriting2"}},[t("el-input",{staticClass:"textarea-height",attrs:{type:"textarea"},model:{value:e.ruleForm.copywriting2,callback:function(r){e.$set(e.ruleForm,"copywriting2",r)},expression:"ruleForm.copywriting2"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("提交审核")]),e._v(" "),t("el-button",{on:{click:function(r){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])};c._withStripped=!0;var u={render:c,staticRenderFns:[]},p=u;var d=!1;var g=t("VU/8")(m,p,!1,function(e){d||t("wUCn")},"data-v-124e3c72",null);g.options.__file="src/views/platform/Firefrom.vue";r.default=g.exports},wUCn:function(e,r,t){var o=t("CvU3");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);t("rjj0")("5c4ed406",o,!1,{})}});